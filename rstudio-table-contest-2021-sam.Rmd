---
title: "RStudio Table Contest 2021 - Sam's Entry"
author: "@parmsam"
date: "10/15/2021"
output:
  html_document:
    code_folding: show
    toc: true
    toc_float:
      collapsed: false
      smooth_scroll: false
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Background



# Load Libraries
```{r libraries, message=FALSE, warning=FALSE}
#load libraries ----
library(dplyr)
library(tibble)
library(reactable)
library(crosstalk)
library(DT)
library(gt)
library(d3scatter)
library(htmltools)
library(tippy)
```

# Load Dataset
```{r dataset, message=FALSE}
#define dataset ----
# mtcars2 <- mtcars %>% tibble::rownames_to_column("model")
data <- SharedData$new(gtcars)
```

# Helper functions
```{r helper-functions, message=FALSE, warning=FALSE}
with_tooltip <- function(value, tooltip, ...) {
  div(style = "text-decoration: underline; text-decoration-style: dotted; cursor: help",
      tippy(value, tooltip, ...))
}
```

# Setup Crosstalk
```{r, crosstalk1, eval=FALSE}
#setup crosstalk widgets ----
bscols(widths = c(4,8,12),
       list(
         filter_checkbox("bdy_style", "Body Style", data, ~bdy_style, inline = TRUE),
         filter_slider("hp", "Horsepower", data, ~hp, width = "100%"),
         filter_slider("year", "Year", data, ~year, width = "100%"),
         filter_select("model", "Model", data, ~unique(gtcars$model)),
         filter_select("mfr", "Manufacturer", data, ~unique(gtcars$mfr))
       ),
       list(
        d3scatter(data, ~hp, ~mpg_c, ~factor(bdy_style), width="100%", height=200),
        d3scatter(data, ~trq, ~mpg_h, ~factor(bdy_style), width="100%", height=200)
       ),
       reactable(data, searchable = TRUE, minRows = 3, defaultPageSize = 5,
                 resizable = TRUE, highlight = TRUE, 
                 selection = "multiple",
                 bordered = TRUE,
                 columns = list(
                      mfr = colDef(header=with_tooltip("mfr", "Manufacturer")),
                      model = colDef(header= with_tooltip("model",	"Model name")),
                      year = colDef(header= with_tooltip("year",	"Model year")),
                      trim = colDef(header= with_tooltip("trim",	"Dscription of the car model's trim")),
                      bdy_style = colDef(header= with_tooltip("bdy_style",	"Body style")),
                      hp = colDef(header= with_tooltip("hp",	"Horsepower")),
                      trq = colDef(header= with_tooltip("trq",	"Torque")),
                      mpg_c = colDef(header= with_tooltip("mpg_c",	"Miles per gallon fuel efficiency city")),
                      mpg_h = colDef(header= with_tooltip("mpg_h",	"Miles per gallon fuel efficiency highway")),
                      drivetrain = colDef(header= with_tooltip("drivetrain",	"Car's drivetrain")),
                      trsmn = colDef(header= with_tooltip("trsmn",	"Codified transmission type")),
                      ctry_origin = colDef(header= with_tooltip("ctry_origin",	"Vehicle manufacturer headquarter country name"))
                 )
       )
       # DT::datatable(data)
)
```

# Interactive table
```{r, crosstalk1, eval=TRUE, echo=FALSE, warning=FALSE, message=FALSE}
```


